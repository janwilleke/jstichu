<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Interact.js Draggable Example</title>
    <script src="https://cdn.jsdelivr.net/npm/interactjs@1.10.11/dist/interact.min.js"></script>
</head>
<body>
    <div id="draggabl" style="width: 50px; height: 50px; background: green; transform: translate(80px, 80px);"></div>
    <div id="draggablx" style="width: 50px; height: 50px; background: red;"></div>
    <div id="draggable" style="width: 50px; height: 50px; background: blue;"></div>
    <script>
      const positionblue = { x: 0, y: 0, color: "blue" };
      const positiongreen = { x: 80, y: 80, color: "green" };
      const positionred = { x: 0, y: 0, color: "red" };

      function handleDrag(event, pos) {
	  pos.x += event.dx;
          pos.y += event.dy;
          event.target.style.transform = `translate(${pos.x}px, ${pos.y}px)`;

          // Send the position to the Flask backend
          fetch('/drag_event', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(pos),
          })
              .then(response => response.json())
        .then(data => console.log(data))
        .catch((error) => {
            console.error('Error:', error);
        });
      }
        interact('#draggabl').draggable({
            listeners: {
                move(event) {
		    handleDrag(event, positiongreen)
                },
            },
        });
        interact('#draggable').draggable({
            listeners: {
                move(event) {
		    handleDrag(event, positionblue)
                },
		end(event) {
		    console.log("on end");
		},
            },
        });
      interact('#draggablx').draggable({
            listeners: {
                move(event) {
		    handleDrag(event, positionred)
                },
            },
        });
      interact('#draggablx').on('tap', function (event) {
	  console.log("on tap");
      });


    </script>
</body>
</html>
